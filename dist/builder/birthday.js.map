{"version":3,"sources":["../../lib/builder/birthday.js"],"names":[],"mappings":"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","file":"birthday.js","sourcesContent":["/**\n * 根据生日（AAAABBCC）生成古诗\n */\n\n\nimport {\n  getRandomItem\n}\nfrom '../util/random'\n\nimport render from '../util/render'\nimport templatesData from '../data/templates'\nimport wordsData from '../data/words'\nimport {\n  countTemplate\n}\nfrom '../util/template'\n\n\nvar BirthdayBuilder = function(birthday) {\n  this.year = parseInt(birthday.substr(0, 4), 10)\n  this.month = parseInt(birthday.substr(4, 2))\n  this.day = parseInt(birthday.substr(6, 2))\n}\n\nBirthdayBuilder.prototype.getTemplate = function() {\n  const i = (this.year + this.month) % templatesData.length\n  return templatesData[i]\n}\n\nBirthdayBuilder.prototype.buildTemplateArray = function(words, count) {\n  const resultArray = []\n  var i = (this.year + this.month + this.day) % words.length\n  while (resultArray.length !== count) {\n    var r = words[i]\n    i = (i + 1) % words.length\n    resultArray.push(r)\n  }\n  return resultArray\n}\n\nBirthdayBuilder.prototype.buildTemplate = function(template) {\n  const self = this\n  const templateCount = countTemplate(template)\n  const aDataWords = wordsData.A\n  const bDataWords = wordsData.B[this.day % wordsData.B.length]\n  const templateData = Object.keys(templateCount).reduce((pv, cv) => {\n    const type = cv.split('')[0]\n    const length = cv.split('')[1]\n    const pz = cv.split('')[2]\n    const count = templateCount[cv]\n    var words = []\n    switch (type) {\n      case 'A':\n        words = aDataWords[length][pz]\n        break\n      case 'B':\n        words = bDataWords[length][pz]\n        break\n      default:\n        break\n    }\n    const data = self.buildTemplateArray(words, count)\n    pv[cv] = data\n    return pv\n  }, {})\n\n  return render(template, templateData)\n}\n\nBirthdayBuilder.prototype.build = function() {\n  const t = this.getTemplate()\n  return this.buildTemplate(t)\n}\n\nexport default function build(birthday) {\n  const bb = new BirthdayBuilder(birthday)\n  return bb.build()\n}\n\n// console.log(build('19921030'))\n"]}